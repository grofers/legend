# A demo custom resource for the Kopf example operators.
apiVersion: grofers.io/v1
kind: GrafanaDashboard
metadata:
  name: sample-title-9
  labels:
    app: sample-title
spec:
  apiVersion: grofers.io/v1beta1
  kind: GrafanaDashboard
  grafana_dashboard_spec:
    title: SampleTitle
    service: SampleService
    grafana_folder: SampleFolder
    alert_channels: ["service-opsgenie"]
    environment: Prod
    description: Logging tool for everything deployed on kubernetes
    references:
      deployment: https://github.com/grofers/legend/tree/master/helm-chart/legend/Readme.md
      documentation: https://github.com/grofers/legend/tree/master/docs
      metrics_definition: https://github.com/grofers/legend
    tags:
    - stage
    - infra
    - crd-testing
    components:
      s3:
        dimensions:
        - bucket_name: sample-bucket
          filter_id: EntireBucket
        panels:
        - title: (R) Request Count - WriteMY
          type: Graph
          description: TODO
          targets:
          - dimensions: {"BucketName": "sample-bucket" ,"FilterId": "EntireBucket"}
            metric: PutRequests
            namespace: AWS/S3
            statistic: Sum
            alias: '{{ metric }}'
            ref_no: 1
          - dimensions: {"BucketName": "sample-bucket" ,"FilterId": "EntireBucket"}
            metric: PostRequests
            namespace: AWS/S3
            statistic: Sum
            alias: '{{ metric }}'
            ref_no: 2

      platform_ec2:
        dimensions:
        - host: sample-ec2-host
      redis:
        dimensions:
          - job_name: sampl-redis-host
      celery:
        dimensions:
          - job_name: sample-celery-host
